# VillagesML æ–°åŠŸèƒ½ä½¿ç”¨æŒ‡å—

## æ–°å¢åŠŸèƒ½æ¦‚è¦½

æœ¬æ¬¡æ›´æ–°ç‚º VillagesML ç³»çµ±æ–°å¢äº† 2 å€‹å¼·å¤§çš„åˆ†æå·¥å…·ï¼Œé›†æˆäº† Phase 15 å’Œ Phase 17 çš„ 10 å€‹ API ç«¯é»ã€‚

---

## 1. å€åŸŸç›¸ä¼¼åº¦åˆ†æ ğŸ”

### è¨ªå•è·¯å¾‘
**URL**: `/villagesML?module=regional&subtab=similarity`
**å°èˆª**: åœ°ååˆ†æ â†’ å€åŸŸåˆ†æ â†’ ç›¸ä¼¼åº¦åˆ†æ

### åŠŸèƒ½èªªæ˜

#### æ¨¡å¼ 1: æŸ¥æ‰¾ç›¸ä¼¼å€åŸŸ
æ‰¾å‡ºèˆ‡ç›®æ¨™å€åŸŸå‘½åæ¨¡å¼æœ€ç›¸ä¼¼çš„å…¶ä»–å€åŸŸã€‚

**ä½¿ç”¨æ­¥é©Ÿ**:
1. é¸æ“‡ç›®æ¨™å€åŸŸï¼ˆå¦‚ï¼šé¾é–€ç¸£ï¼‰
2. é¸æ“‡ç›¸ä¼¼åº¦æŒ‡æ¨™ï¼ˆCosine æˆ– Jaccardï¼‰
3. è¨­ç½®è¿”å›æ•¸é‡ï¼ˆ1-50ï¼‰
4. è¨­ç½®æœ€å°ç›¸ä¼¼åº¦é–¾å€¼ï¼ˆ0-1ï¼‰
5. é»æ“Šã€ŒæŸ¥è©¢ã€

**çµæœå±•ç¤º**:
- ç›¸ä¼¼åº¦æ’è¡Œå¡ç‰‡
- å…±åŒå­—ç¬¦åˆ—è¡¨
- ç‰¹å¾å­—ç¬¦åˆ—è¡¨
- å¯é»æ“Šã€Œè©³ç´°å°æ¯”ã€æŸ¥çœ‹æ›´å¤šä¿¡æ¯

#### æ¨¡å¼ 2: å…©å€åŸŸå°æ¯”
æ·±å…¥å°æ¯”å…©å€‹å€åŸŸçš„å‘½åç‰¹å¾ã€‚

**ä½¿ç”¨æ­¥é©Ÿ**:
1. é¸æ“‡å€åŸŸ 1
2. é¸æ“‡å€åŸŸ 2
3. é»æ“Šã€Œå°æ¯”ã€

**çµæœå±•ç¤º**:
- Cosine ç›¸ä¼¼åº¦
- Jaccard ç›¸ä¼¼åº¦
- å…±åŒå­—ç¬¦ï¼ˆç¶ è‰²æ¨™ç±¤ï¼‰
- å€åŸŸ 1 ç‰¹æœ‰å­—ç¬¦ï¼ˆè—è‰²æ¨™ç±¤ï¼‰
- å€åŸŸ 2 ç‰¹æœ‰å­—ç¬¦ï¼ˆæ©™è‰²æ¨™ç±¤ï¼‰

#### æ¨¡å¼ 3: ç›¸ä¼¼åº¦çŸ©é™£
ç”Ÿæˆå¤šå€‹å€åŸŸä¹‹é–“çš„ç›¸ä¼¼åº¦ç†±åŠ›åœ–ã€‚

**ä½¿ç”¨æ­¥é©Ÿ**:
1. å¾ä¸‹æ‹‰åˆ—è¡¨é¸æ“‡å€åŸŸ
2. é»æ“Šã€Œæ·»åŠ ã€ï¼ˆæœ€å¤š 20 å€‹å€åŸŸï¼‰
3. é¸æ“‡ç›¸ä¼¼åº¦æŒ‡æ¨™
4. é»æ“Šã€Œç”ŸæˆçŸ©é™£ã€

**çµæœå±•ç¤º**:
- ECharts ç†±åŠ›åœ–
- é¡è‰²è¶Šæ·±è¡¨ç¤ºç›¸ä¼¼åº¦è¶Šé«˜
- é¼ æ¨™æ‡¸åœæŸ¥çœ‹å…·é«”æ•¸å€¼

### æ‡‰ç”¨å ´æ™¯
- æ–¹è¨€å€åŠƒåˆ†æ
- å€åŸŸå‘½åæ¨¡å¼ç ”ç©¶
- æ–‡åŒ–åœˆè­˜åˆ¥
- æ­·å²é·å¾™è·¯å¾‘æ¨æ¸¬

---

## 2. èªç¾©å­é¡åˆ¥åˆ†æ ğŸ·ï¸

### è¨ªå•è·¯å¾‘
**URL**: `/villagesML?module=semantic&subtab=subcategories`
**å°èˆª**: åœ°ååˆ†æ â†’ èªç¾©åˆ†æ â†’ å­é¡åˆ¥åˆ†æ

### åŠŸèƒ½èªªæ˜

#### æ¨¡å¼ 1: å­é¡åˆ¥åˆ—è¡¨
ç€è¦½æ‰€æœ‰èªç¾©å­é¡åˆ¥åŠå…¶å­—ç¬¦çµ„æˆã€‚

**ä½¿ç”¨æ­¥é©Ÿ**:
1. é¸æ“‡çˆ¶é¡åˆ¥ï¼ˆå¯é¸ï¼‰ï¼š
   - å±±åœ° (mountain)
   - æ°´ç³» (water)
   - èšè½ (settlement)
   - æ–¹ä½ (direction)
   - æ¤è¢« (vegetation)
   - å»ºç¯‰ (structure)
   - å‹•ç‰© (animal)
   - é¡è‰² (color)
   - å…¶ä»– (other)
2. é»æ“Šã€ŒæŸ¥è©¢ã€

**çµæœå±•ç¤º**:
- å­é¡åˆ¥å¡ç‰‡ç¶²æ ¼
- æ¯å€‹å¡ç‰‡é¡¯ç¤ºï¼š
  - å­é¡åˆ¥åç¨±
  - çˆ¶é¡åˆ¥æ¨™ç±¤
  - å­—ç¬¦æ•¸é‡
  - å­—ç¬¦é è¦½ï¼ˆå‰ 15 å€‹ï¼‰
- é»æ“Šã€ŒæŸ¥çœ‹è©³æƒ…ã€ç²å–å®Œæ•´å­—ç¬¦åˆ—è¡¨

#### æ¨¡å¼ 2: å€åŸŸå°æ¯”
åˆ†æç‰¹å®šå€åŸŸçš„èªç¾©å­é¡åˆ¥åˆ†å¸ƒç‰¹å¾ã€‚

**ä½¿ç”¨æ­¥é©Ÿ**:
1. è¼¸å…¥å€åŸŸåç¨±ï¼ˆå¦‚ï¼šå»£å·å¸‚ï¼‰
2. é¸æ“‡å€åŸŸå±¤ç´šï¼ˆå¸‚ç´š/ç¸£ç´š/é„‰é®ç´šï¼‰
3. é¸æ“‡çˆ¶é¡åˆ¥
4. é»æ“Šã€ŒæŸ¥è©¢ã€

**çµæœå±•ç¤º**:
- **é›·é”åœ–**: å±•ç¤ºè©²å€åŸŸå„å­é¡åˆ¥çš„ VTF åˆ†å¸ƒ
- **è©³æƒ…è¡¨æ ¼**: åŒ…å«
  - å­é¡åˆ¥åç¨±
  - VTFï¼ˆè™›æ“¬è©é »ï¼‰
  - å‚¾å‘å€¼ (Z-score)
  - ç™¾åˆ†æ¯”

**è§£è®€æç¤º**:
- å‚¾å‘å€¼ > 0.2: è©²å­é¡åˆ¥åœ¨è©²å€åŸŸé¡¯è‘—é«˜æ–¼å…¨å±€å¹³å‡
- å‚¾å‘å€¼ < -0.2: è©²å­é¡åˆ¥åœ¨è©²å€åŸŸé¡¯è‘—ä½æ–¼å…¨å±€å¹³å‡

#### æ¨¡å¼ 3: å‚¾å‘æ’è¡Œ
ç™¼ç¾å“ªäº›å€åŸŸå°ç‰¹å®šèªç¾©å­é¡åˆ¥æœ‰æœ€å¼·çš„å‚¾å‘æ€§ã€‚

**ä½¿ç”¨æ­¥é©Ÿ**:
1. é¸æ“‡å€åŸŸå±¤ç´š
2. é¸æ“‡çˆ¶é¡åˆ¥ï¼ˆå¯é¸ï¼‰
3. è¨­ç½®è¿”å›æ•¸é‡ï¼ˆ5-50ï¼‰
4. é»æ“Šã€ŒæŸ¥è©¢ã€

**çµæœå±•ç¤º**:
- **æŸ±ç‹€åœ–**: å‚¾å‘å€¼æ’è¡Œå¯è¦–åŒ–
- **æ’è¡Œæ¦œè¡¨æ ¼**: åŒ…å«
  - æ’åï¼ˆå‰ä¸‰åæœ‰é‡‘éŠ€éŠ…å¾½ç« ï¼‰
  - å€åŸŸåç¨±
  - å­é¡åˆ¥
  - å‚¾å‘å€¼
  - VTF
  - ç™¾åˆ†æ¯”

### æ‡‰ç”¨å ´æ™¯
- å€åŸŸå‘½åç‰¹è‰²åˆ†æ
- èªç¾©é¡åˆ¥ç´°åˆ†ç ”ç©¶
- åœ°ç†ç’°å¢ƒèˆ‡å‘½åé—œä¿‚
- æ–‡åŒ–èªç¾©åå¥½è­˜åˆ¥

---

## æŠ€è¡“èªªæ˜

### ç›¸ä¼¼åº¦æŒ‡æ¨™

#### Cosine ç›¸ä¼¼åº¦
- åŸºæ–¼å‘é‡å¤¾è§’è¨ˆç®—
- ç¯„åœ: 0-1ï¼ˆ1 è¡¨ç¤ºå®Œå…¨ç›¸åŒï¼‰
- é©åˆæ¯”è¼ƒå­—ç¬¦åˆ†å¸ƒæ¨¡å¼
- å°å­—ç¬¦é »ç‡æ•æ„Ÿ

#### Jaccard ç›¸ä¼¼åº¦
- åŸºæ–¼é›†åˆäº¤é›†èˆ‡ä¸¦é›†
- ç¯„åœ: 0-1ï¼ˆ1 è¡¨ç¤ºå®Œå…¨ç›¸åŒï¼‰
- é©åˆæ¯”è¼ƒå­—ç¬¦é›†åˆ
- å°å­—ç¬¦å‡ºç¾èˆ‡å¦æ•æ„Ÿ

### è™›æ“¬è©é » (VTF)
- è¨ˆç®—æ–¹æ³•: å­—ç¬¦åœ¨è©²é¡åˆ¥ä¸­çš„å‡ºç¾æ¬¡æ•¸
- ç”¨é€”: è¡¡é‡èªç¾©é¡åˆ¥çš„ä½¿ç”¨é »ç‡
- å…¨å±€ VTF: æ•´å€‹æ•¸æ“šé›†çš„çµ±è¨ˆ
- å€åŸŸ VTF: ç‰¹å®šå€åŸŸçš„çµ±è¨ˆ

### å‚¾å‘å€¼ (Z-score)
- è¨ˆç®—æ–¹æ³•: (å€åŸŸé »ç‡ - å…¨å±€å¹³å‡) / æ¨™æº–å·®
- è§£è®€:
  - Z > 2: æ¥µé¡¯è‘—é«˜æ–¼å¹³å‡
  - Z > 0.5: é¡¯è‘—é«˜æ–¼å¹³å‡
  - -0.5 < Z < 0.5: æ¥è¿‘å¹³å‡
  - Z < -0.5: é¡¯è‘—ä½æ–¼å¹³å‡
  - Z < -2: æ¥µé¡¯è‘—ä½æ–¼å¹³å‡

---

## å¸¸è¦‹å•é¡Œ

### Q1: ç‚ºä»€éº¼æœ‰äº›å€åŸŸæ‰¾ä¸åˆ°ç›¸ä¼¼å€åŸŸï¼Ÿ
**A**: å¯èƒ½åŸå› ï¼š
- è©²å€åŸŸå‘½åæ¨¡å¼éå¸¸ç¨ç‰¹
- æœ€å°ç›¸ä¼¼åº¦é–¾å€¼è¨­ç½®éé«˜
- å»ºè­°é™ä½é–¾å€¼æˆ–å¢åŠ è¿”å›æ•¸é‡

### Q2: ç›¸ä¼¼åº¦çŸ©é™£ç‚ºä»€éº¼é™åˆ¶ 20 å€‹å€åŸŸï¼Ÿ
**A**: ç‚ºäº†ä¿è­‰ï¼š
- ç†±åŠ›åœ–å¯è®€æ€§
- API éŸ¿æ‡‰é€Ÿåº¦
- ç€è¦½å™¨æ¸²æŸ“æ€§èƒ½

### Q3: å­é¡åˆ¥åˆ—è¡¨ç‚ºä»€éº¼æ²’æœ‰é¡¯ç¤ºæ‰€æœ‰å­—ç¬¦ï¼Ÿ
**A**:
- å¡ç‰‡é è¦½åªé¡¯ç¤ºå‰ 15 å€‹å­—ç¬¦
- é»æ“Šã€ŒæŸ¥çœ‹è©³æƒ…ã€å¯æŸ¥çœ‹å®Œæ•´åˆ—è¡¨

### Q4: å‚¾å‘æ’è¡Œæ¦œç‚ºä»€éº¼æ²’æœ‰æˆ‘çš„å€åŸŸï¼Ÿ
**A**: å¯èƒ½åŸå› ï¼š
- è©²å€åŸŸçš„å‚¾å‘å€¼ä¸åœ¨å‰ N å
- å¢åŠ è¿”å›æ•¸é‡ï¼ˆtop_nï¼‰
- æˆ–åˆ‡æ›åˆ°ã€Œå€åŸŸå°æ¯”ã€æ¨¡å¼ç›´æ¥æŸ¥è©¢

---

## æ€§èƒ½æç¤º

### å„ªåŒ–å»ºè­°
1. **ç›¸ä¼¼åº¦çŸ©é™£**: å»ºè­°é¸æ“‡ 5-10 å€‹å€åŸŸä»¥ç²å¾—æœ€ä½³é«”é©—
2. **å­é¡åˆ¥åˆ—è¡¨**: ä½¿ç”¨çˆ¶é¡åˆ¥ç¯©é¸å¯åŠ å¿«åŠ è¼‰é€Ÿåº¦
3. **å‚¾å‘æ’è¡Œ**: è¼ƒå¤§çš„ top_n å€¼æœƒå¢åŠ åŠ è¼‰æ™‚é–“

### ç€è¦½å™¨è¦æ±‚
- Chrome >= 90
- Firefox >= 88
- Safari >= 14
- Edge >= 90

---

## API åƒè€ƒ

### å€åŸŸç›¸ä¼¼åº¦ API

```javascript
import {
  getRegionSimilaritySearch,
  getRegionSimilarityPair,
  getRegionSimilarityMatrix
} from '@/api'

// æŸ¥æ‰¾ç›¸ä¼¼å€åŸŸ
const results = await getRegionSimilaritySearch({
  region: 'é¾é–€ç¸£',
  top_k: 10,
  metric: 'cosine',
  min_similarity: 0.8
})

// å°æ¯”å…©å€‹å€åŸŸ
const comparison = await getRegionSimilarityPair({
  region1: 'é¾é–€ç¸£',
  region2: 'åšç¾…ç¸£'
})

// ç”Ÿæˆç›¸ä¼¼åº¦çŸ©é™£
const matrix = await getRegionSimilarityMatrix({
  regions: ['é¾é–€ç¸£', 'åšç¾…ç¸£', 'æƒ æ±ç¸£'],
  metric: 'cosine'
})
```

### èªç¾©å­é¡åˆ¥ API

```javascript
import {
  getSemanticSubcategoryList,
  getSemanticSubcategoryChars,
  getSemanticSubcategoryVTFGlobal,
  getSemanticSubcategoryVTFRegional,
  getSemanticSubcategoryTendencyTop,
  getSemanticSubcategoryComparison
} from '@/api'

// ç²å–å­é¡åˆ¥åˆ—è¡¨
const subcategories = await getSemanticSubcategoryList({
  parent_category: 'mountain'
})

// ç²å–å­é¡åˆ¥å­—ç¬¦
const chars = await getSemanticSubcategoryChars('mountain_peak')

// å…¨å±€ VTF
const globalVTF = await getSemanticSubcategoryVTFGlobal({
  parent_category: 'mountain',
  limit: 100
})

// å€åŸŸ VTF
const regionalVTF = await getSemanticSubcategoryVTFRegional({
  region_name: 'å»£å·å¸‚',
  region_level: 'å¸‚ç´š',
  parent_category: 'mountain'
})

// å‚¾å‘æ’è¡Œ
const topTendencies = await getSemanticSubcategoryTendencyTop({
  region_level: 'å¸‚ç´š',
  parent_category: 'mountain',
  top_n: 10
})

// å€åŸŸå°æ¯”
const comparison = await getSemanticSubcategoryComparison({
  region_name: 'å»£å·å¸‚',
  region_level: 'å¸‚ç´š',
  parent_category: 'mountain'
})
```

---

## åé¥‹èˆ‡æ”¯æŒ

å¦‚é‡åˆ°å•é¡Œæˆ–æœ‰æ”¹é€²å»ºè­°ï¼Œè«‹ï¼š
1. æª¢æŸ¥ç€è¦½å™¨æ§åˆ¶å°éŒ¯èª¤ä¿¡æ¯
2. ç¢ºèª API ç«¯é»å¯è¨ªå•
3. æŸ¥çœ‹ `IMPLEMENTATION_SUMMARY.md` äº†è§£æŠ€è¡“ç´°ç¯€
4. è¯ç¹«é–‹ç™¼åœ˜éšŠ

---

**ç‰ˆæœ¬**: v1.0.0
**æ›´æ–°æ—¥æœŸ**: 2026-02-27
**æ–‡æª”ç¶­è­·**: VillagesML é–‹ç™¼åœ˜éšŠ
